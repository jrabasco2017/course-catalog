<p id="notice"><%= notice %></p>

<h1>Search for the class</h1>
<%= form_tag(searches_index_path, :method => "get", id: "search-form") do %>
  <%= text_field_tag :search, params[:search], placeholder: "Search Courses" %>
  <% categories_array = Subject.all.map { |subject| [ subject.name] } %>
  <%= select_tag("subject", options_for_select(categories_array, params[:search_column])) %>
  <%= submit_tag "Search", :name => nil %>
<% end %>

<table>
  <thead>
    <tr>
      <th>Course</th>
      <th>Subjects</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @searches.each do |search| %>
      <tr>
        <td><%= search.key %></td>
        <td><%= search.linked %></td>
        <% if logged_in? %>
          <td><%= link_to 'Enroll', enrolls_adder_path({:my_param=> search.key })%></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
